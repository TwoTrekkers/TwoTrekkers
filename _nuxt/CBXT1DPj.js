import{z as et,a2 as st,C as m,b as _,v as ot,A as E,o as at,w as nt,L as n,D as o,N as s,O as p,P as l,F as M,Q as S,a6 as lt,M as r,U as rt}from"./Dgn1c7DG.js";import{M as it}from"./BMSQkwth.js";import{u as ct,d as mt,c as dt,a as ut}from"./Bi3Kd3fV.js";import{u as gt}from"./Bk_n4hmJ.js";const ht={key:0,class:"pb-16"},pt={class:"relative w-full h-[280px] sm:h-[320px] md:h-[440px] overflow-hidden"},vt=["src","alt"],xt={class:"absolute bottom-4 sm:bottom-6 left-1/2 -translate-x-1/2 w-11/12 max-w-6xl px-4"},ft={class:"text-2xl sm:text-3xl md:text-4xl font-semibold tracking-tight"},_t={class:"w-11/12 max-w-6xl mx-auto mt-6 sm:mt-8 md:mt-10 grid grid-cols-1 lg:grid-cols-12 gap-6 md:gap-8"},wt={class:"lg:col-span-8"},bt={key:0,class:"mb-6 p-4 bg-white/5 rounded-lg"},kt={class:"text-sm text-white/80 leading-relaxed"},yt=["innerHTML"],Ct={class:"lg:col-span-4 lg:sticky lg:top-24 h-fit"},Ut={class:"card shadow-card rounded-xl p-5 bg-white/5"},$t={class:"flex items-center gap-4"},Tt={class:"h-12 w-12 rounded-full bg-gradient-to-br from-primary/70 to-primary/30 flex items-center justify-center text-white font-semibold"},Mt={class:"text-sm opacity-80"},St={class:"text-lg font-medium"},Lt={class:"mt-4"},jt={class:"text-sm opacity-80"},It={class:"text-base"},Pt={class:"mt-4"},zt={class:"text-sm opacity-80"},Rt={class:"mt-2 flex flex-wrap gap-2"},Ft={key:0,class:"w-11/12 max-w-6xl mx-auto mt-10"},Nt={class:"text-xl font-semibold mb-4"},At={class:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-3 md:gap-4",id:"imageGallery"},Et=["onClick"],Bt=["src","alt"],Dt={key:0,class:"mt-6 flex flex-col sm:flex-row items-center justify-center gap-3",id:"imagePagination"},Ht=["disabled"],qt={class:"flex items-center gap-1 sm:gap-2 flex-wrap justify-center"},Ot=["onClick"],Qt=["disabled"],Vt={class:"relative max-w-5xl w-full h-full flex items-center justify-center"},Gt=["src","alt"],Jt={key:0,class:"mt-2 text-center text-xs sm:text-sm opacity-80 px-4"},Yt={key:1,class:"w-4/5 mx-auto py-12"},Zt="https://twotrekkers.travel",L="https://twotrekkers.nyc3.cdn.digitaloceanspaces.com/media/app-images/TwoTrekkersLogo.svg",j=8,oe=et({__name:"[id]",async setup(Kt){let w,I;const{t:u,locale:v}=ct(),B=mt(),D=`${dt().origin}/data/memoirs.json`,{data:H}=([w,I]=st(()=>gt(D,{key:"memoirs-all"},"$FuQucf-NE1")),w=await w,I(),w),i=m(()=>(H.value||[]).find(t=>String(t.id)===String(B.params.id))),q=new it({html:!1,linkify:!0,breaks:!0}),O=t=>q.render(t||""),b=_(""),Q=async()=>{const t=i.value;if(!t?.id){b.value="";return}const e=encodeURIComponent(String(t.id)),a=encodeURIComponent(String(t._id||t.metadata?.title||t.id)),d=[`/md/memoirs/${a}/${v.value}.md`,`/md/memoirs/${a}/en.md`,`/md/memoirs/${e}/${v.value}.md`,`/md/memoirs/${e}/en.md`,`/md/memoirs/${e}.${v.value}.md`,`/md/memoirs/${e}.en.md`];for(const f of d)try{const h=await fetch(f,{cache:"no-store"});if(h.ok){b.value=await h.text();return}}catch{}b.value=t?.metadata?.description||""};ot([i,()=>v.value],()=>{Q()},{immediate:!0});const V=m(()=>O(b.value||i.value?.metadata?.description||"")),P=m(()=>{const t=i.value;if(!t)return"";const e=t.i18n?.title;return e?.[v.value]||e?.en||t.metadata?.title||""}),U=m(()=>{const t=i.value;if(!t)return"";const e=t.i18n?.summary;return e?.[v.value]||e?.en||t.summary||""}),G=m(()=>{const t=i.value?.publishedAt;if(!t)return"";try{const e=new Date(t),a=e.getUTCFullYear(),d=e.toLocaleString("en-US",{month:"short",timeZone:"UTC"}),f=String(e.getUTCDate()).padStart(2,"0"),h=String(e.getUTCHours()).padStart(2,"0"),tt=String(e.getUTCMinutes()).padStart(2,"0");return`${d} ${f}, ${a} ${h}:${tt} UTC`}catch{return t}}),z=m(()=>i.value?.metadata?.author||""),J=m(()=>{const t=(z.value||"").trim();if(!t)return"TT";const e=t.split(/\s+/),a=e[0]?.[0]||"",d=e.length>1?e[e.length-1]?.[0]:"";return(a+d).toUpperCase()}),c=m(()=>i.value?.images||[]),R=_(!1);E(()=>{R.value=!0});const F=m(()=>{const t=c.value;if(t.length>0){if(!R.value){const a=Math.floor((i.value?.id?.charCodeAt(0)||0)%t.length);return t[a]?.imageUrl||L}const e=Math.floor(Math.random()*t.length);return t[e]?.imageUrl||L}return L}),g=_(1),k=m(()=>Math.max(1,Math.ceil(c.value.length/j))),Y=m(()=>{const t=(g.value-1)*j;return c.value.slice(t,t+j)}),$=t=>{t<1||t>k.value||(g.value=t)},Z=()=>$(g.value-1),K=()=>$(g.value+1),y=_(!1),x=_(0),C=m(()=>c.value[x.value]),W=t=>{if(!t)return;const e=c.value.findIndex(a=>a.imageUrl===t);x.value=e>=0?e:0,y.value=!0},T=()=>{y.value=!1},N=()=>{c.value.length&&(x.value=(x.value-1+c.value.length)%c.value.length)},A=()=>{c.value.length&&(x.value=(x.value+1)%c.value.length)},X=async()=>{try{await navigator.clipboard.writeText(window.location.href)}catch{}};return E(()=>{const t=e=>{y.value&&(e.key==="Escape"&&T(),e.key==="ArrowLeft"&&N(),e.key==="ArrowRight"&&A())};window.addEventListener("keydown",t),at(()=>window.removeEventListener("keydown",t))}),nt(()=>{const t=i.value;if(!t)return;const e=P.value||"Memoir",a=U.value||`Travel memoir: ${e}`,d=(t?.metadata?.tags||[]).join(", "),f=F.value,h=`${Zt}/memoirs/${t.id}`;ut({title:e,meta:[{name:"description",content:a},{name:"keywords",content:`${e}, travel memoir, ${d}`},{property:"og:type",content:"article"},{property:"og:title",content:e},{property:"og:description",content:a},{property:"og:image",content:f},{property:"og:url",content:h},{name:"twitter:card",content:"summary_large_image"},{name:"twitter:title",content:e},{name:"twitter:description",content:a},{name:"twitter:image",content:f}],link:[{rel:"canonical",href:h}]})}),(t,e)=>o(i)?(r(),n("div",ht,[s("section",pt,[s("img",{src:o(F),alt:o(u)("alt.twotrekkers_logo"),class:"w-full h-full object-cover"},null,8,vt),e[0]||(e[0]=s("div",{class:"absolute inset-0 bg-gradient-to-t from-black/60 via-black/20 to-transparent"},null,-1)),s("div",xt,[s("h1",ft,l(o(P)),1)])]),s("section",_t,[s("article",wt,[o(U)?(r(),n("div",bt,[s("p",kt,l(o(U)),1)])):p("",!0),s("div",{class:"prose prose-invert max-w-none prose-sm",innerHTML:o(V)},null,8,yt)]),s("aside",Ct,[s("div",Ut,[s("div",$t,[s("div",Tt,l(o(J)),1),s("div",null,[s("p",Mt,l(o(u)("memoirs.author")),1),s("p",St,l(o(z)),1)])]),s("div",Lt,[s("p",jt,l(o(u)("memoirs.posted_on")),1),s("p",It,l(o(G)),1)]),s("div",Pt,[s("p",zt,l(o(u)("memoirs.tags")),1),s("div",Rt,[(r(!0),n(M,null,S(o(i).metadata?.tags||[],a=>(r(),n("span",{key:a,class:"category-tag"},l(a),1))),128))])]),s("div",{class:"mt-5 flex gap-2"},[s("button",{class:"trekker-btn",onClick:X},"Copy Link")])])])]),e[2]||(e[2]=s("section",{class:"w-11/12 max-w-6xl mx-auto mt-6"},[s("div",{class:"h-px bg-white/15"})],-1)),o(c).length?(r(),n("section",Ft,[s("h2",Nt,l(o(u)("memoirs.images.label")),1),s("div",At,[(r(!0),n(M,null,S(o(Y),a=>(r(),n("button",{key:a.imageUrl,class:"group relative rounded-lg overflow-hidden bg-white/5 focus:outline-none focus:ring-2 focus:ring-primary/60",onClick:d=>W(a.imageUrl)},[s("img",{src:a.imageUrl,alt:a.altText||o(i).metadata?.title,class:"w-full h-32 sm:h-36 md:h-40 object-cover",loading:"lazy"},null,8,Bt),e[1]||(e[1]=s("div",{class:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition"},null,-1))],8,Et))),128))]),o(k)>1?(r(),n("div",Dt,[s("button",{class:"trekker-btn",disabled:o(g)===1,onClick:Z},l(o(u)("memoirs.previous")),9,Ht),s("div",qt,[(r(!0),n(M,null,S(o(k),a=>(r(),n("button",{key:a,class:rt(["px-2 sm:px-3 py-1 rounded border border-white/15 text-sm sm:text-base",a===o(g)?"bg-white/20":"bg-transparent hover:bg-white/10"]),onClick:d=>$(a)},l(a),11,Ot))),128))]),s("button",{class:"trekker-btn",disabled:o(g)===o(k),onClick:K},l(o(u)("memoirs.next")),9,Qt)])):p("",!0)])):p("",!0),o(y)?(r(),n("div",{key:1,class:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center p-2 sm:p-4",onClick:lt(T,["self"]),role:"dialog","aria-modal":"true"},[s("button",{class:"absolute top-2 right-3 sm:top-5 sm:right-6 text-white text-2xl sm:text-3xl leading-none z-10",onClick:T,"aria-label":"Close viewer"},"×"),o(c).length?(r(),n("button",{key:0,class:"absolute left-2 sm:left-4 md:left-8 text-white/80 hover:text-white text-2xl sm:text-3xl z-10",onClick:N,"aria-label":"Previous image"},"‹")):p("",!0),s("div",Vt,[s("img",{src:o(C)?.imageUrl,alt:o(C)?.altText||o(i).metadata?.title,class:"w-full h-auto max-h-[90vh] rounded-lg object-contain"},null,8,Gt),o(C)?.altText?(r(),n("p",Jt,l(o(C)?.altText),1)):p("",!0)]),o(c).length?(r(),n("button",{key:1,class:"absolute right-2 sm:right-4 md:right-8 text-white/80 hover:text-white text-2xl sm:text-3xl z-10",onClick:A,"aria-label":"Next image"},"›")):p("",!0)])):p("",!0)])):(r(),n("article",Yt,[s("p",null,l(o(u)("memoirs.no_content")),1)]))}});export{oe as default};
